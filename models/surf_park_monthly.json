{
    "metadata": {
        "title": "A simple model of a swiming pool with a storage reservoir",
        "description": "This model uses weather data from Merignac."
    },
    "timestepper": {
        "start": "1992-01-01",
        "end": "2022-12-30",
        "timestep": 1
    },
    "nodes": [
        {
            "name": "roof_rainwater",
            "type": "catchment",
            "flow": "roof_prec"
        },
        {
            "name": "rain_link",
            "type": "link"
        },
        {
            "name": "relevage",
            "type": "link"
        },
        {
            "name": "rainwater_storage",
            "type": "storage",
            "max_volume": 1750,
            "min_volume": 0,
            "initial_volume": 0,
            "cost": -10
        },
        {
            "name": "bassin_rainwater",
            "type": "catchment",
            "flow": "bassin_prec"
        },
        {
            "name": "bassin1and2",
            "type": "storage",
            "max_volume": 20000,
            "min_volume": 0,
            "initial_volume": 20000,
            "cost": -300
        },
        {
            "name": "pet",
            "type": "output",
            "max_flow":"bassin_pet",
            "cost": -500
        },
        {
            "name": "reservoir_tampon",
            "type": "storage",
            "max_volume": 2000,
            "initial_volume": 0,
            "min_volume": 0,
            "cost": -10
        },
        {
            "name": "overflow",
            "type": "output",
            "cost":1000
        }
    ],
    "edges": [
        ["roof_rainwater", "rain_link"],
        ["rain_link", "rainwater_storage"],
        ["rainwater_storage", "rain_link"],
        ["rain_link", "relevage"],
        ["relevage", "bassin1and2"],
        ["bassin_rainwater", "bassin1and2"],
        ["bassin1and2", "pet"],
        ["bassin1and2", "reservoir_tampon"],
        ["reservoir_tampon", "bassin1and2"],
        ["reservoir_tampon", "rainwater_storage"],
        ["bassin1and2", "overflow"]
    ],
    "parameters": {
        "roof_prec": {
            "type": "aggregated",
            "agg_func": "product",
            "parameters": ["prec", "recuperation_factor", "roof_area", "mm_to_m3", "month_inverse_duration"]
        },
        "bassin_prec": {
            "type": "aggregated",
            "agg_func": "product",
            "parameters": ["prec", "bassin_area", "mm_to_m3", "month_inverse_duration"]
        },
        "prec":{
            "type": "monthlyprofile",
            "values":[88.13548387,	67.14516129,	61.50967742,	73.78709677,	70.43870968,	74.57741935,	43.80967742,	56.14516129,	77.44193548,	78.69032258,	110.6741935,	107.9870968]
        },
        "month_inverse_duration":{
            "type":"monthlyprofile",
            "values":[0.03225806, 0.03539823, 0.03225806, 0.03333333, 0.03225806,
            0.03333333, 0.03225806, 0.03225806, 0.03333333, 0.03225806,
            0.03333333, 0.03225806]
        }, 
        "recuperation_factor": {
            "name": "recuperation_factor",
            "type": "constant",
            "value": 1
        },
        "roof_area": {
            "name": "roof_area",
            "type": "constant",
            "value": 23833
        },
        "mm_to_m3": {
            "name": "mm_to_m3",
            "type": "constant",
            "value": 0.001
        },
        "bassin_pet": {
            "type": "aggregated",
            "agg_func": "product",
            "parameters": ["pet", "pet_penalty_factor", "month_inverse_duration"]
        },
        "pet":{
            "type": "monthlyprofile",
            "values": [229, 441, 912, 1334, 1400, 2077, 2192, 1902, 1288, 721, 299, 189]
        },
        "bassin_area": {
            "name": "bassin_area",
            "type": "constant",
            "value": 13548
        },
        "pet_penalty_factor": {
            "name": "pet_penalty_factor",
            "type": "constant",
            "value": 1
        }
    },
    "recorders": {
        "bassin_volume": {
            "type": "numpyarraystoragerecorder",
            "node": "bassin1and2"
        },
        "pet_flow": {
            "type": "numpyarraynoderecorder",
            "node": "pet"
        },
        "rainwater_flow": {
            "type": "numpyarraynoderecorder",
            "node": "roof_rainwater"
        },
        "bassin_overflow": {
            "type": "numpyarraynoderecorder",
            "node": "overflow"
        },
        "tampon": {
            "type": "numpyarraystoragerecorder",
            "node": "reservoir_tampon"
        },
        "rain_reservoir": {
            "type": "numpyarraystoragerecorder",
            "node": "rainwater_storage"
        }
    }
}
